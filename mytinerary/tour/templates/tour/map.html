<!DOCTYPE html>
<html lang="en">
<head>
  <title>Google Maps API</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
      function initialize() {
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var map = new google.maps.Map(document.getElementById('map'));
        directionsDisplay.setMap(map);
        var locations = [
            {title: 'marker1', position: {lat: {{ poi.latitude }}, lng: {{ poi.longitude }}}},
            {title: 'marker2', position: {lat: 44.9737, lng: -93.2577}},
            {title: 'marker3', position: {lat: 44.9698, lng: -93.2738}}
        ];
        var markers = [];
        var infoWindow = new google.maps.InfoWindow({content: 'cool place to visit'});
        for (var i = 0; i < locations.length; i++) {
            var position = locations[i].position;
            var title = locations[i].title;
            var marker = new google.maps.Marker({
                map: map,
                position: position,
                title: title,
                id: i
            });
            markers.push(marker);
            marker.addListener('click', function() {
                createInfoWindow(this, infoWindow);
            });
        }

        calculateAndDisplayRoute(directionsService, directionsDisplay);
      }

      function createInfoWindow(marker, window) {
          if (window.marker != marker) {
              window.marker = marker;
              window.setContent('<div>' + marker.title + '</div>');
              window.open(map, marker);
          }
      }

      function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        directionsService.route({
          origin: 'Stone Arch Bridge, 100 Portland Ave, Minneapolis, MN 55401',
          destination: 'Walker Art Center, 1750 Hennepin Ave, Minneapolis, MN 55403',
		  waypoints: [{location: 'Target Center, 600 First Avenue North, Minneapolis, MN 55403'},{location: 'Dakota Jazz Club & Restaurant, 1010 Nicollet Mall, Minneapolis, MN 55403'}],
          travelMode: 'WALKING',
          optimizeWaypoints: true
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }
    </script>
  <style>
    /* Remove the navbar's default margin-bottom and rounded borders */
    .navbar {
      margin-bottom: 0;
      border-radius: 0;
    }

    /* Add a gray background color and some padding to the footer */
    footer {
      background-color: #f2f2f2;
      padding: 25px;
    }
  </style>

</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Google Maps API</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="jumbotron">
  <div class="container text-center">
    <h1>Google Maps API</h1>
    <p>Just Playing Around With Google Maps</p>
  </div>
</div>
<div>
    {{ poi.latitude }}
</div>

<div class="row">
  <div id="map" style="height:500px;"></div>
</div>

<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhEeD2Dgvw-AAxGR9_qL7P9JlTeO-WjvM&callback=initialize">
</script>
</body>
</html>
